---
{{ if .Values.common.external_ca_certificates_enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ template "fullname" . }}-admin-cert-secret
  namespace: "{{ .Release.Namespace }}"
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": pre-install
    "helm.sh/hook-weight": "-4"
data:
{{ tpl ((.Files.Glob "keys/sgadmin/*.pem").AsSecrets) . | indent 4 }}
{{ end }}
---
{{ if .Values.common.external_ca_certificates_enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ template "fullname" . }}-nodes-cert-secret
  namespace: "{{ .Release.Namespace }}"
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": pre-install
    "helm.sh/hook-weight": "-4"
data:
{{ tpl ((.Files.Glob "keys/nodes/*").AsSecrets) . | indent 4 }}
{{ end }}
---
{{ if .Values.common.ca_certificates_enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ template "fullname" . }}-root-ca-secret
  namespace: "{{ .Release.Namespace }}"
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": pre-install
    "helm.sh/hook-weight": "-4"
data:
{{ tpl ((.Files.Glob "keys/ca/*").AsSecrets) . | indent 4 }}
{{ end }}
---
{{ if .Values.common.external_ca_single_certificate_enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ template "fullname" . }}-admin-cert-secret
  namespace: "{{ .Release.Namespace }}"
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": pre-install
    "helm.sh/hook-weight": "-4"
data:
{{ tpl ((.Files.Glob "keys/sgadmin/*.pem").AsSecrets) . | indent 4 }}
{{ end }}
---
{{ if .Values.common.external_ca_single_certificate_enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ template "fullname" . }}-nodes-cert-secret
  namespace: "{{ .Release.Namespace }}"
  annotations:
    # This is what defines this resource as a hook. Without this line, the
    # job is considered part of the release.
    "helm.sh/hook": pre-install
    "helm.sh/hook-weight": "-4"
data:
{{ tpl ((.Files.Glob "keys/sg-esnode/*").AsSecrets) . | indent 4 }}
{{ end }}